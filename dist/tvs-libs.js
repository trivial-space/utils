!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.tvsLibs=e():t.tvsLibs=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,r){"use strict";r.d(e,"a",function(){return a});const n=1e-6;e.b=n;let a="undefined"!=typeof Float32Array?Float32Array:Array;const i=Math.random;e.c=i;Math.PI},function(t,e,r){"use strict";function n(t){return M[t].bindPoint}function a(t,e){return function(r){t.uniform1i(e,r)}}function i(t,e){return function(r){t.uniform1iv(e,r)}}function u(t,e){return function(r){t.uniform2iv(e,r)}}function o(t,e){return function(r){t.uniform3iv(e,r)}}function c(t,e){return function(r){t.uniform4iv(e,r)}}function f(t,e,r,a){var i=n(e);return function(e){t.uniform1i(a,r),t.activeTexture(t.TEXTURE0+r),t.bindTexture(i,e)}}function s(t,e,r,a,i){for(var u=n(e),o=new Int32Array(i),c=0;c<i;++c)o[c]=r+c;return function(e){t.uniform1iv(a,o);for(var r in e)t.activeTexture(t.TEXTURE0+o[r]),t.bindTexture(u,e[r])}}function l(t,e,r){return function(n){t.bindBuffer(t.ARRAY_BUFFER,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribPointer(e,r.itemSize,p.c.FLOAT,n.normalize||!1,n.stride||0,n.offset||0)}}function d(t,e,r){return function(n){t.bindBuffer(t.ARRAY_BUFFER,n.buffer),t.enableVertexAttribArray(e),t.vertexAttribIPointer(e,r.itemSize,p.c.INT,n.stride||0,n.offset||0)}}function h(t,e,r){var n=r.size,a=r.count;return function(r){t.bindBuffer(t.ARRAY_BUFFER,r.buffer);for(var i=n,u=i/a,o=M[p.c.FLOAT].size*i,c=r.normalize||!1,f=r.offset||0,s=o/a,l=0;l<a;++l)t.enableVertexAttribArray(e+l),t.vertexAttribPointer(e+l,u,p.c.FLOAT,c,o,f+s*l)}}function T(t,e,r){if(void 0===e&&(e={}),void 0===r&&(r={}),null!=e.flipY&&e.flipY!==r.flipY&&t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e.flipY),e.wrap&&e.wrap!==r.wrap||e.wrapS&&e.wrapS!==r.wrapS||e.wrapT&&e.wrapT!==r.wrapT){var n=void 0,a=void 0;e.wrap?n=a=e.wrap:(a=e.wrapT||"CLAMP_TO_EDGE",n=e.wrapS||"CLAMP_TO_EDGE"),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t[n]),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t[a])}e.magFilter&&e.magFilter!==r.magFilter&&t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t[e.magFilter]),e.minFilter&&e.minFilter!==r.minFilter&&t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t[e.minFilter])}e.c=function(t,e){function r(e,r){var a=t.getUniformLocation(e,r.name),i=r.size>1&&"[0]"===r.name.substr(-3),u=r.type,o=M[u];if(!o)throw"unknown type: 0x"+u.toString(16);if(null!=a){var c;if(function(t){return null===t.Type}(o)){var f=n;n+=r.size,c=i?o.arraySetter(t,u,f,a,r.size):o.setter(t,u,f,a)}else c=o.arraySetter&&i?o.arraySetter(t,a):o.setter(t,a);return{setter:c,location:a}}}for(var n=0,a={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),u=0;u<i;++u){var o=t.getActiveUniform(e,u);if(!o)break;var c=o.name;if("[0]"===c.substr(-3)&&(c=c.substr(0,c.length-3)),e){var f=r(e,o);f&&(a[c]=f)}}return a},e.b=function(t,e){for(var r={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<n;a++){var i=t.getActiveAttrib(e,a);if(!i)break;var u=t.getAttribLocation(e,i.name),o=m[i.type],c=o.setter(t,u,o);r[i.name]={setter:c,location:u}}return r},e.e=function(t){if(t instanceof Int8Array)return p.c.BYTE;if(t instanceof Uint8Array)return p.c.UNSIGNED_BYTE;if(t instanceof Uint8ClampedArray)return p.c.UNSIGNED_BYTE;if(t instanceof Int16Array)return p.c.SHORT;if(t instanceof Uint16Array)return p.c.UNSIGNED_SHORT;if(t instanceof Int32Array)return p.c.INT;if(t instanceof Uint32Array)return p.c.UNSIGNED_INT;if(t instanceof Float32Array)return p.c.FLOAT;throw"unsupported typed array type"},e.g=T,e.h=function(t,e,r,n){if(null!=e.width&&null!=e.height){null==e.frameBuffer&&(e.frameBuffer=t.createFramebuffer()),e.textures||(e.textures=[]),t.bindFramebuffer(t.FRAMEBUFFER,e.frameBuffer),e.textureConfig.type===t.FLOAT&&t.getExtension("OES_texture_float");var a=e.textureConfig.count;if(a>1){for(var i=t.getExtension("WEBGL_draw_buffers"),u=[],o=0;o<a;o++)u.push(i["COLOR_ATTACHMENT"+o+"_WEBGL"]);for(i.drawBuffersWEBGL(u),o=0;o<a;o++){null==e.textures[o]&&(e.textures[o]=t.createTexture());var c=e.textures[o];t.bindTexture(t.TEXTURE_2D,c),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,e.textureConfig.type,null),T(t,r,n),t.framebufferTexture2D(t.FRAMEBUFFER,u[o],t.TEXTURE_2D,c,0)}}else null==e.textures[0]&&(e.textures[0]=t.createTexture()),c=e.textures[0],t.bindTexture(t.TEXTURE_2D,c),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,e.textureConfig.type,null),T(t,r,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,c,0);null==e.depthBuffer&&(e.depthBuffer=t.createRenderbuffer()),t.bindRenderbuffer(t.RENDERBUFFER,e.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e.depthBuffer);var f=t.checkFramebufferStatus(t.FRAMEBUFFER);f!==t.FRAMEBUFFER_COMPLETE&&console.error("framebuffer error",f,r),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null)}},e.d=function(t,e){t.deleteFramebuffer(e.frameBuffer),t.deleteRenderbuffer(e.depthBuffer);for(var r=0,n=e.textures;r<n.length;r++){var a=n[r];t.deleteTexture(a)}},e.a=function(t,e){if(e.enable)for(var r=0,n=e.enable;r<n.length;r++){var a=n[r];t.enable(a)}if(e.disable)for(var i=0,u=e.disable;i<u.length;i++)a=u[i],t.disable(a);e.blendFunc&&t.blendFunc.apply(t,e.blendFunc),null!=e.depthFunc&&t.depthFunc(e.depthFunc),null!=e.cullFace&&t.cullFace(e.cullFace),null!=e.frontFace&&t.frontFace(e.frontFace),null!=e.lineWidth&&t.lineWidth(e.lineWidth),e.colorMask&&t.colorMask.apply(t,e.colorMask),null!=e.depthMask&&t.depthMask(e.depthMask),e.clearColor&&t.clearColor.apply(t,e.clearColor),null!=e.clearDepth&&t.clearDepth(e.clearDepth),null!=e.clearBits&&t.clear(e.clearBits)},e.f=function(t,e){if(e.enable)for(var r=0,n=e.enable;r<n.length;r++){var a=n[r];t.disable(a)}if(e.disable)for(var i=0,u=e.disable;i<u.length;i++)a=u[i],t.enable(a)};var _,E,b,p=r(8),M=(_={},_[p.c.FLOAT]={Type:Float32Array,size:4,setter:function(t,e){return function(r){t.uniform1f(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1fv(e,r)}}},_[p.c.FLOAT_VEC2]={Type:Float32Array,size:8,setter:function(t,e){return function(r){t.uniform2fv(e,r)}}},_[p.c.FLOAT_VEC3]={Type:Float32Array,size:12,setter:function(t,e){return function(r){t.uniform3fv(e,r)}}},_[p.c.FLOAT_VEC4]={Type:Float32Array,size:16,setter:function(t,e){return function(r){t.uniform4fv(e,r)}}},_[p.c.INT]={Type:Int32Array,size:4,setter:a,arraySetter:i},_[p.c.INT_VEC2]={Type:Int32Array,size:8,setter:u},_[p.c.INT_VEC3]={Type:Int32Array,size:12,setter:o},_[p.c.INT_VEC4]={Type:Int32Array,size:16,setter:c},_[p.c.UNSIGNED_INT]={Type:Uint32Array,size:4,setter:function(t,e){return function(r){t.uniform1ui(e,r)}},arraySetter:function(t,e){return function(r){t.uniform1uiv(e,r)}}},_[p.c.UNSIGNED_INT_VEC2]={Type:Uint32Array,size:8,setter:function(t,e){return function(r){t.uniform2uiv(e,r)}}},_[p.c.UNSIGNED_INT_VEC3]={Type:Uint32Array,size:12,setter:function(t,e){return function(r){t.uniform3uiv(e,r)}}},_[p.c.UNSIGNED_INT_VEC4]={Type:Uint32Array,size:16,setter:function(t,e){return function(r){t.uniform4uiv(e,r)}}},_[p.c.BOOL]={Type:Uint32Array,size:4,setter:a,arraySetter:i},_[p.c.BOOL_VEC2]={Type:Uint32Array,size:8,setter:u},_[p.c.BOOL_VEC3]={Type:Uint32Array,size:12,setter:o},_[p.c.BOOL_VEC4]={Type:Uint32Array,size:16,setter:c},_[p.c.FLOAT_MAT2]={Type:Float32Array,size:16,setter:function(t,e){return function(r){t.uniformMatrix2fv(e,!1,r)}}},_[p.c.FLOAT_MAT3]={Type:Float32Array,size:36,setter:function(t,e){return function(r){t.uniformMatrix3fv(e,!1,r)}}},_[p.c.FLOAT_MAT4]={Type:Float32Array,size:64,setter:function(t,e){return function(r){t.uniformMatrix4fv(e,!1,r)}}},_[p.c.FLOAT_MAT2X3]={Type:Float32Array,size:24,setter:function(t,e){return function(r){t.uniformMatrix2x3fv(e,!1,r)}}},_[p.c.FLOAT_MAT2X4]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix2x4fv(e,!1,r)}}},_[p.c.FLOAT_MAT3X2]={Type:Float32Array,size:24,setter:function(t,e){return function(r){t.uniformMatrix3x2fv(e,!1,r)}}},_[p.c.FLOAT_MAT3X4]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix3x4fv(e,!1,r)}}},_[p.c.FLOAT_MAT4X2]={Type:Float32Array,size:32,setter:function(t,e){return function(r){t.uniformMatrix4x2fv(e,!1,r)}}},_[p.c.FLOAT_MAT4X3]={Type:Float32Array,size:48,setter:function(t,e){return function(r){t.uniformMatrix4x3fv(e,!1,r)}}},_[p.c.SAMPLER_2D]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_2D},_[p.c.SAMPLER_CUBE]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_CUBE_MAP},_[p.c.SAMPLER_3D]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_3D},_[p.c.SAMPLER_2D_SHADOW]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_2D},_[p.c.SAMPLER_2D_ARRAY]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_2D_ARRAY},_[p.c.SAMPLER_2D_ARRAY_SHADOW]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_2D_ARRAY},_[p.c.SAMPLER_CUBE_SHADOW]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_CUBE_MAP},_[p.c.INT_SAMPLER_2D]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_2D},_[p.c.INT_SAMPLER_3D]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_3D},_[p.c.INT_SAMPLER_CUBE]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_CUBE_MAP},_[p.c.INT_SAMPLER_2D_ARRAY]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_2D_ARRAY},_[p.c.UNSIGNED_INT_SAMPLER_2D]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_2D},_[p.c.UNSIGNED_INT_SAMPLER_3D]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_3D},_[p.c.UNSIGNED_INT_SAMPLER_CUBE]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_CUBE_MAP},_[p.c.UNSIGNED_INT_SAMPLER_2D_ARRAY]={Type:null,size:0,setter:f,arraySetter:s,bindPoint:p.c.TEXTURE_2D_ARRAY},_),m=(E={},E[p.c.FLOAT]={size:4,setter:l,itemSize:1},E[p.c.FLOAT_VEC2]={size:8,setter:l,itemSize:2},E[p.c.FLOAT_VEC3]={size:12,setter:l,itemSize:3},E[p.c.FLOAT_VEC4]={size:16,setter:l,itemSize:4},E[p.c.INT]={size:4,setter:d,itemSize:1},E[p.c.INT_VEC2]={size:8,setter:d,itemSize:2},E[p.c.INT_VEC3]={size:12,setter:d,itemSize:3},E[p.c.INT_VEC4]={size:16,setter:d,itemSize:4},E[p.c.UNSIGNED_INT]={size:4,setter:d,itemSize:1},E[p.c.UNSIGNED_INT_VEC2]={size:8,setter:d,itemSize:2},E[p.c.UNSIGNED_INT_VEC3]={size:12,setter:d,itemSize:3},E[p.c.UNSIGNED_INT_VEC4]={size:16,setter:d,itemSize:4},E[p.c.BOOL]={size:4,setter:d,itemSize:1},E[p.c.BOOL_VEC2]={size:8,setter:d,itemSize:2},E[p.c.BOOL_VEC3]={size:12,setter:d,itemSize:3},E[p.c.BOOL_VEC4]={size:16,setter:d,itemSize:4},E[p.c.FLOAT_MAT2]={size:4,setter:h,count:2},E[p.c.FLOAT_MAT3]={size:9,setter:h,count:3},E[p.c.FLOAT_MAT4]={size:16,setter:h,count:4},E);b={},b[p.c.BYTE]=Int8Array,b[p.c.UNSIGNED_BYTE]=Uint8Array,b[p.c.SHORT]=Int16Array,b[p.c.UNSIGNED_SHORT]=Uint16Array,b[p.c.INT]=Int32Array,b[p.c.UNSIGNED_INT]=Uint32Array,b[p.c.FLOAT]=Float32Array,b[p.c.UNSIGNED_SHORT_4_4_4_4]=Uint16Array,b[p.c.UNSIGNED_SHORT_5_5_5_1]=Uint16Array,b[p.c.UNSIGNED_SHORT_5_6_5]=Uint16Array,b[p.c.HALF_FLOAT]=Uint16Array,b[p.c.UNSIGNED_INT_2_10_10_10_REV]=Uint32Array,b[p.c.UNSIGNED_INT_10F_11F_11F_REV]=Uint32Array,b[p.c.UNSIGNED_INT_5_9_9_9_REV]=Uint32Array,b[p.c.FLOAT_32_UNSIGNED_INT_24_8_REV]=Uint32Array,b[p.c.UNSIGNED_INT_24_8]=Uint32Array},function(t,e,r){"use strict";r(0),r(12),r(13),r(3);var n=r(14),a=(r(15),r(16),r(4));r(5);r.d(e,"a",function(){return n}),r.d(e,"b",function(){return a})},function(t,e,r){"use strict";e.a=function(){let t=new n.a(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t};var n=r(0)},function(t,e,r){"use strict";function n(){let t=new T.a(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){let e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function i(t,e,r){let n=new T.a(3);return n[0]=t,n[1]=e,n[2]=r,n}function u(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function o(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function f(t,e){let r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(r*r+n*n+a*a)}function s(t,e){let r=e[0]-t[0],n=e[1]-t[1],a=e[2]-t[2];return r*r+n*n+a*a}function l(t){let e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function d(t,e){let r=e[0],n=e[1],a=e[2],i=r*r+n*n+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t}function h(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=n,e.clone=function(t){var e=new T.a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=i,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=u,e.multiply=o,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=f,e.squaredDistance=s,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=d,e.dot=h,e.cross=function(t,e,r){let n=e[0],a=e[1],i=e[2],u=r[0],o=r[1],c=r[2];return t[0]=a*c-i*o,t[1]=i*u-n*c,t[2]=n*o-a*u,t},e.lerp=function(t,e,r,n){let a=e[0],i=e[1],u=e[2];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=u+n*(r[2]-u),t},e.hermite=function(t,e,r,n,a,i){let u=i*i,o=u*(2*i-3)+1,c=u*(i-2)+i,f=u*(i-1),s=u*(3-2*i);return t[0]=e[0]*o+r[0]*c+n[0]*f+a[0]*s,t[1]=e[1]*o+r[1]*c+n[1]*f+a[1]*s,t[2]=e[2]*o+r[2]*c+n[2]*f+a[2]*s,t},e.bezier=function(t,e,r,n,a,i){let u=1-i,o=u*u,c=i*i,f=o*u,s=3*i*o,l=3*c*u,d=c*i;return t[0]=e[0]*f+r[0]*s+n[0]*l+a[0]*d,t[1]=e[1]*f+r[1]*s+n[1]*l+a[1]*d,t[2]=e[2]*f+r[2]*s+n[2]*l+a[2]*d,t},e.random=function(t,e){e=e||1;let r=2*T.c()*Math.PI,n=2*T.c()-1,a=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=n*e,t},e.transformMat4=function(t,e,r){let n=e[0],a=e[1],i=e[2],u=r[3]*n+r[7]*a+r[11]*i+r[15];return u=u||1,t[0]=(r[0]*n+r[4]*a+r[8]*i+r[12])/u,t[1]=(r[1]*n+r[5]*a+r[9]*i+r[13])/u,t[2]=(r[2]*n+r[6]*a+r[10]*i+r[14])/u,t},e.transformMat3=function(t,e,r){let n=e[0],a=e[1],i=e[2];return t[0]=n*r[0]+a*r[3]+i*r[6],t[1]=n*r[1]+a*r[4]+i*r[7],t[2]=n*r[2]+a*r[5]+i*r[8],t},e.transformQuat=function(t,e,r){let n=e[0],a=e[1],i=e[2],u=r[0],o=r[1],c=r[2],f=r[3],s=f*n+o*i-c*a,l=f*a+c*n-u*i,d=f*i+u*a-o*n,h=-u*n-o*a-c*i;return t[0]=s*f+h*-u+l*-c-d*-o,t[1]=l*f+h*-o+d*-u-s*-c,t[2]=d*f+h*-c+s*-o-l*-u,t},e.rotateX=function(t,e,r,n){let a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0],i[1]=a[1]*Math.cos(n)-a[2]*Math.sin(n),i[2]=a[1]*Math.sin(n)+a[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.rotateY=function(t,e,r,n){let a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[2]*Math.sin(n)+a[0]*Math.cos(n),i[1]=a[1],i[2]=a[2]*Math.cos(n)-a[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.rotateZ=function(t,e,r,n){let a=[],i=[];return a[0]=e[0]-r[0],a[1]=e[1]-r[1],a[2]=e[2]-r[2],i[0]=a[0]*Math.cos(n)-a[1]*Math.sin(n),i[1]=a[0]*Math.sin(n)+a[1]*Math.cos(n),i[2]=a[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.angle=function(t,e){let r=i(t[0],t[1],t[2]),n=i(e[0],e[1],e[2]);d(r,r),d(n,n);let a=h(r,n);return a>1?0:a<-1?Math.PI:Math.acos(a)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let r=t[0],n=t[1],a=t[2],i=e[0],u=e[1],o=e[2];return Math.abs(r-i)<=T.b*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-u)<=T.b*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-o)<=T.b*Math.max(1,Math.abs(a),Math.abs(o))};var T=r(0);const _=u;e.sub=_;const E=o;e.mul=E;const b=c;e.div=b;const p=f;e.dist=p;const M=s;e.sqrDist=M;const m=a;e.len=m;const A=l;e.sqrLen=A;const v=function(){let t=n();return function(e,r,n,a,i,u){let o,c;for(r||(r=3),n||(n=0),c=a?Math.min(a*r+n,e.length):e.length,o=n;o<c;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],i(t,t,u),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}}();e.forEach=v},function(t,e,r){"use strict";function n(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function a(t){let e=t[0],r=t[1],n=t[2],a=t[3];return Math.sqrt(e*e+r*r+n*n+a*a)}function i(t){let e=t[0],r=t[1],n=t[2],a=t[3];return e*e+r*r+n*n+a*a}function u(t,e){let r=e[0],n=e[1],a=e[2],i=e[3],u=r*r+n*n+a*a+i*i;return u>0&&(u=1/Math.sqrt(u),t[0]=r*u,t[1]=n*u,t[2]=a*u,t[3]=i*u),t}e.b=function(t){let e=new o.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.g=function(t,e,r,n){let a=new o.a(4);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a},e.c=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.l=function(t,e,r,n,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t},e.a=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},e.k=n,e.h=a,e.m=i,e.j=u,e.d=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.i=function(t,e,r,n){let a=e[0],i=e[1],u=e[2],o=e[3];return t[0]=a+n*(r[0]-a),t[1]=i+n*(r[1]-i),t[2]=u+n*(r[2]-u),t[3]=o+n*(r[3]-o),t},e.f=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.e=function(t,e){let r=t[0],n=t[1],a=t[2],i=t[3],u=e[0],c=e[1],f=e[2],s=e[3];return Math.abs(r-u)<=o.b*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=o.b*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(a-f)<=o.b*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-s)<=o.b*Math.max(1,Math.abs(i),Math.abs(s))};var o=r(0);!function(){let t=function(){let t=new o.a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}()}()},function(t,e,r){"use strict";function n(t,e){return e?e+"."+t:t}function a(t){var e,r,a,f=t.value,s=Object(c.a)(),d=[],h={};return h.HOT={entity:h,type:o.a.HOT},h.COLD={entity:h,type:o.a.COLD},h.id=function(t,r){return s=n(t,r),e=r,h},h.val=function(t){return f=t,h},h.updateVal=function(t){return f=t(f),h},h.accept=function(t){return r=t,h},h.reset=function(){return a=!0,h},h.getId=function(){return s},t.procedure&&d.push(t),h.react=function(t,e,r){var n=i(t,e,r);n.pidSuffix=l;var a=n.dependencies;return n.dependencies=[{entity:h,type:o.a.ACCUMULATOR}],a&&a.length&&(n.dependencies=n.dependencies.concat(a)),d.push(n),h},h.getGraph=function(){var t=u.a();return t.entities[s]=Object(o.c)({id:s,value:f,accept:r,reset:a}),d.forEach(function(r){var a=r.dependencies,i=r.processId?n(r.processId,e):s+r.pidSuffix+(a&&a.length?":"+a.reduce(function(t,e){var r=e.entity.getId();return r===s?t:t+":"+r},""):""),u=[];a&&a.forEach(function(e,r){if(u[r]=e.type,e.type!==o.a.ACCUMULATOR){var n=Object(o.b)({process:i,entity:e.entity.getId(),port:r});t.arcs[n.id]=n}});var c=Object(o.b)({process:i,entity:s});t.arcs[c.id]=c,t.processes[i]=Object(o.d)({id:i,ports:u,procedure:r.procedure,async:r.async,autostart:r.autostart,delta:r.delta})}),t},h}function i(t,e,r){var n={procedure:e};return null!=t&&(n.dependencies=t),"string"==typeof r?n.processId=r:n.pidSuffix=s,n}e.d=function(t){return a({value:t})},r.d(e,"c",function(){return d}),r.d(e,"a",function(){return h}),r.d(e,"b",function(){return T});var u=r(18),o=r(19),c=r(7),f=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},s="Stream",l="Reaction",d=function(t,e,r){return a(i(t,e,r))},h=function(t,e,r){return a(f({},i(t,e,r),{async:!0}))},T=function(t,e,r){return a(f({},i(t,e,r),{async:!0,autostart:!0}))}},function(t,e,r){"use strict";e.a=function(){var t=a();return t[6]=15&t[6]|64,t[8]=63&t[8]|128,function(t){var e=i,r=0;return e[t[r++]]+e[t[r++]]+e[t[r++]]+e[t[r++]]+"-"+e[t[r++]]+e[t[r++]]+"-"+e[t[r++]]+e[t[r++]]+"-"+e[t[r++]]+e[t[r++]]+"-"+e[t[r++]]+e[t[r++]]+e[t[r++]]+e[t[r++]]+e[t[r++]]+e[t[r++]]}(t)};for(var n=new Array(16),a=function(){for(var t=0,e=void 0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random(),n[t]=e>>>((3&t)<<3)&255);return n},i=[],u={},o=0;o<256;o++)i[o]=(o+256).toString(16).substr(1),u[i[o]]=o},function(t,e,r){"use strict";r.d(e,"a",function(){return n}),r.d(e,"b",function(){return a}),r.d(e,"d",function(){return i}),r.d(e,"e",function(){return u}),r.d(e,"c",function(){return o});var n="position",a="uv",i="source",u="coords",o={FLOAT:5126,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FLOAT_MAT2X3:35685,FLOAT_MAT2X4:35686,FLOAT_MAT3X2:35687,FLOAT_MAT3X4:35688,FLOAT_MAT4X2:35689,FLOAT_MAT4X3:35690,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT:5125,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,TEXTURE_2D:3553,TEXTURE_CUBE_MAP:34067,TEXTURE_3D:32879,TEXTURE_2D_ARRAY:35866,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,HALF_FLOAT:5131,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042}},function(t,e,r){"use strict";e.a=function(t){var e=t.getContext("webgl")||t.getContext("experimental-webgl");if(null==e)throw Error("Webgl context cannot be initialized");return e},e.b=function(t,e){void 0===e&&(e=1),e=Math.max(1,e);var r=t.clientWidth*e|0,n=t.clientHeight*e|0;return(t.width!==r||t.height!==n)&&(t.width=r,t.height=n,!0)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r.d(e,"vr",function(){return n});var n={camera:r(11),flowCamera:r(17),flowPainterUtils:r(21)};e.default={vr:n}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(t){void 0===t&&(t={});var e=Object.assign({fovy:.6*Math.PI,aspect:window.innerWidth/window.innerHeight,near:.1,far:1e3,needsUpdatePerspective:!1,rotateX:0,rotateY:0,moveForward:0,moveLeft:0,moveUp:0},t);return{props:e,state:{view:n.a.create(),perspective:n.a.perspective(n.a.create(),e.fovy,e.aspect,e.near,e.far),rotationX:n.a.create(),rotationY:n.a.create(),position:[0,0,0]}}},e.update=function(t){var e=t.props,r=t.state,a=r.view,i=r.perspective,u=r.rotationX,o=r.rotationY,c=r.position;e.needsUpdatePerspective&&(e.needsUpdatePerspective=!1,n.a.perspective(i,e.fovy,e.aspect,e.near,e.far));var f=!1;if(e.rotateX&&(n.a.rotateX(u,u,e.rotateX),e.rotateX=0,f=!0),e.rotateY&&(n.a.rotateY(o,o,e.rotateY),e.rotateY=0,f=!0),e.moveForward){var s=n.b.fromValues(o[8],o[9],o[10]);n.b.add(c,c,n.b.scale(s,s,-e.moveForward)),e.moveForward=0,f=!0}e.moveLeft&&(s=n.b.fromValues(o[0],o[1],o[2]),n.b.add(c,c,n.b.scale(s,s,-e.moveLeft)),e.moveLeft=0,f=!0);e.moveUp&&(s=n.b.fromValues(o[4],o[5],o[6]),n.b.add(c,c,n.b.scale(s,s,e.moveUp)),e.moveUp=0,f=!0);f&&(n.a.fromTranslation(a,c),n.a.multiply(a,a,o),n.a.multiply(a,a,u),n.a.invert(a,a))};var n=r(2)},function(t,e,r){"use strict";r(0)},function(t,e,r){"use strict";r(0)},function(t,e,r){"use strict";function n(t,e,r){let n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],c=e[5],f=e[6],s=e[7],l=e[8],d=e[9],h=e[10],T=e[11],_=e[12],E=e[13],b=e[14],p=e[15],M=r[0],m=r[1],A=r[2],v=r[3];return t[0]=M*n+m*o+A*l+v*_,t[1]=M*a+m*c+A*d+v*E,t[2]=M*i+m*f+A*h+v*b,t[3]=M*u+m*s+A*T+v*p,M=r[4],m=r[5],A=r[6],v=r[7],t[4]=M*n+m*o+A*l+v*_,t[5]=M*a+m*c+A*d+v*E,t[6]=M*i+m*f+A*h+v*b,t[7]=M*u+m*s+A*T+v*p,M=r[8],m=r[9],A=r[10],v=r[11],t[8]=M*n+m*o+A*l+v*_,t[9]=M*a+m*c+A*d+v*E,t[10]=M*i+m*f+A*h+v*b,t[11]=M*u+m*s+A*T+v*p,M=r[12],m=r[13],A=r[14],v=r[15],t[12]=M*n+m*o+A*l+v*_,t[13]=M*a+m*c+A*d+v*E,t[14]=M*i+m*f+A*h+v*b,t[15]=M*u+m*s+A*T+v*p,t}function a(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new i.a(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new i.a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,r,n,a,u,o,c,f,s,l,d,h,T,_,E){let b=new i.a(16);return b[0]=t,b[1]=e,b[2]=r,b[3]=n,b[4]=a,b[5]=u,b[6]=o,b[7]=c,b[8]=f,b[9]=s,b[10]=l,b[11]=d,b[12]=h,b[13]=T,b[14]=_,b[15]=E,b},e.set=function(t,e,r,n,a,i,u,o,c,f,s,l,d,h,T,_,E){return t[0]=e,t[1]=r,t[2]=n,t[3]=a,t[4]=i,t[5]=u,t[6]=o,t[7]=c,t[8]=f,t[9]=s,t[10]=l,t[11]=d,t[12]=h,t[13]=T,t[14]=_,t[15]=E,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){let r=e[1],n=e[2],a=e[3],i=e[6],u=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=i,t[11]=e[14],t[12]=a,t[13]=u,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],c=e[6],f=e[7],s=e[8],l=e[9],d=e[10],h=e[11],T=e[12],_=e[13],E=e[14],b=e[15],p=r*o-n*u,M=r*c-a*u,m=r*f-i*u,A=n*c-a*o,v=n*f-i*o,y=a*f-i*c,S=s*_-l*T,R=s*E-d*T,g=s*b-h*T,O=l*E-d*_,F=l*b-h*_,N=d*b-h*E,U=p*N-M*F+m*O+A*g-v*R+y*S;return U?(U=1/U,t[0]=(o*N-c*F+f*O)*U,t[1]=(a*F-n*N-i*O)*U,t[2]=(_*y-E*v+b*A)*U,t[3]=(d*v-l*y-h*A)*U,t[4]=(c*g-u*N-f*R)*U,t[5]=(r*N-a*g+i*R)*U,t[6]=(E*m-T*y-b*M)*U,t[7]=(s*y-d*m+h*M)*U,t[8]=(u*F-o*g+f*S)*U,t[9]=(n*g-r*F-i*S)*U,t[10]=(T*v-_*m+b*p)*U,t[11]=(l*m-s*v-h*p)*U,t[12]=(o*R-u*O-c*S)*U,t[13]=(r*O-n*R+a*S)*U,t[14]=(_*M-T*A-E*p)*U,t[15]=(s*A-l*M+d*p)*U,t):null},e.adjoint=function(t,e){let r=e[0],n=e[1],a=e[2],i=e[3],u=e[4],o=e[5],c=e[6],f=e[7],s=e[8],l=e[9],d=e[10],h=e[11],T=e[12],_=e[13],E=e[14],b=e[15];return t[0]=o*(d*b-h*E)-l*(c*b-f*E)+_*(c*h-f*d),t[1]=-(n*(d*b-h*E)-l*(a*b-i*E)+_*(a*h-i*d)),t[2]=n*(c*b-f*E)-o*(a*b-i*E)+_*(a*f-i*c),t[3]=-(n*(c*h-f*d)-o*(a*h-i*d)+l*(a*f-i*c)),t[4]=-(u*(d*b-h*E)-s*(c*b-f*E)+T*(c*h-f*d)),t[5]=r*(d*b-h*E)-s*(a*b-i*E)+T*(a*h-i*d),t[6]=-(r*(c*b-f*E)-u*(a*b-i*E)+T*(a*f-i*c)),t[7]=r*(c*h-f*d)-u*(a*h-i*d)+s*(a*f-i*c),t[8]=u*(l*b-h*_)-s*(o*b-f*_)+T*(o*h-f*l),t[9]=-(r*(l*b-h*_)-s*(n*b-i*_)+T*(n*h-i*l)),t[10]=r*(o*b-f*_)-u*(n*b-i*_)+T*(n*f-i*o),t[11]=-(r*(o*h-f*l)-u*(n*h-i*l)+s*(n*f-i*o)),t[12]=-(u*(l*E-d*_)-s*(o*E-c*_)+T*(o*d-c*l)),t[13]=r*(l*E-d*_)-s*(n*E-a*_)+T*(n*d-a*l),t[14]=-(r*(o*E-c*_)-u*(n*E-a*_)+T*(n*c-a*o)),t[15]=r*(o*d-c*l)-u*(n*d-a*l)+s*(n*c-a*o),t},e.determinant=function(t){let e=t[0],r=t[1],n=t[2],a=t[3],i=t[4],u=t[5],o=t[6],c=t[7],f=t[8],s=t[9],l=t[10],d=t[11],h=t[12],T=t[13],_=t[14],E=t[15];return(e*u-r*i)*(l*E-d*_)-(e*o-n*i)*(s*E-d*T)+(e*c-a*i)*(s*_-l*T)+(r*o-n*u)*(f*E-d*h)-(r*c-a*u)*(f*_-l*h)+(n*c-a*o)*(f*T-s*h)},e.multiply=n,e.translate=function(t,e,r){let n,a,i,u,o,c,f,s,l,d,h,T,_=r[0],E=r[1],b=r[2];return e===t?(t[12]=e[0]*_+e[4]*E+e[8]*b+e[12],t[13]=e[1]*_+e[5]*E+e[9]*b+e[13],t[14]=e[2]*_+e[6]*E+e[10]*b+e[14],t[15]=e[3]*_+e[7]*E+e[11]*b+e[15]):(n=e[0],a=e[1],i=e[2],u=e[3],o=e[4],c=e[5],f=e[6],s=e[7],l=e[8],d=e[9],h=e[10],T=e[11],t[0]=n,t[1]=a,t[2]=i,t[3]=u,t[4]=o,t[5]=c,t[6]=f,t[7]=s,t[8]=l,t[9]=d,t[10]=h,t[11]=T,t[12]=n*_+o*E+l*b+e[12],t[13]=a*_+c*E+d*b+e[13],t[14]=i*_+f*E+h*b+e[14],t[15]=u*_+s*E+T*b+e[15]),t},e.scale=function(t,e,r){let n=r[0],a=r[1],i=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,r,n){let a,u,o,c,f,s,l,d,h,T,_,E,b,p,M,m,A,v,y,S,R,g,O,F,N=n[0],U=n[1],I=n[2],D=Math.sqrt(N*N+U*U+I*I);return Math.abs(D)<i.b?null:(D=1/D,N*=D,U*=D,I*=D,a=Math.sin(r),u=Math.cos(r),o=1-u,c=e[0],f=e[1],s=e[2],l=e[3],d=e[4],h=e[5],T=e[6],_=e[7],E=e[8],b=e[9],p=e[10],M=e[11],m=N*N*o+u,A=U*N*o+I*a,v=I*N*o-U*a,y=N*U*o-I*a,S=U*U*o+u,R=I*U*o+N*a,g=N*I*o+U*a,O=U*I*o-N*a,F=I*I*o+u,t[0]=c*m+d*A+E*v,t[1]=f*m+h*A+b*v,t[2]=s*m+T*A+p*v,t[3]=l*m+_*A+M*v,t[4]=c*y+d*S+E*R,t[5]=f*y+h*S+b*R,t[6]=s*y+T*S+p*R,t[7]=l*y+_*S+M*R,t[8]=c*g+d*O+E*F,t[9]=f*g+h*O+b*F,t[10]=s*g+T*O+p*F,t[11]=l*g+_*O+M*F,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,r){let n=Math.sin(r),a=Math.cos(r),i=e[4],u=e[5],o=e[6],c=e[7],f=e[8],s=e[9],l=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+f*n,t[5]=u*a+s*n,t[6]=o*a+l*n,t[7]=c*a+d*n,t[8]=f*a-i*n,t[9]=s*a-u*n,t[10]=l*a-o*n,t[11]=d*a-c*n,t},e.rotateY=function(t,e,r){let n=Math.sin(r),a=Math.cos(r),i=e[0],u=e[1],o=e[2],c=e[3],f=e[8],s=e[9],l=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-f*n,t[1]=u*a-s*n,t[2]=o*a-l*n,t[3]=c*a-d*n,t[8]=i*n+f*a,t[9]=u*n+s*a,t[10]=o*n+l*a,t[11]=c*n+d*a,t},e.rotateZ=function(t,e,r){let n=Math.sin(r),a=Math.cos(r),i=e[0],u=e[1],o=e[2],c=e[3],f=e[4],s=e[5],l=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+f*n,t[1]=u*a+s*n,t[2]=o*a+l*n,t[3]=c*a+d*n,t[4]=f*a-i*n,t[5]=s*a-u*n,t[6]=l*a-o*n,t[7]=d*a-c*n,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,r){let n,a,u,o=r[0],c=r[1],f=r[2],s=Math.sqrt(o*o+c*c+f*f);return Math.abs(s)<i.b?null:(s=1/s,o*=s,c*=s,f*=s,n=Math.sin(e),a=Math.cos(e),u=1-a,t[0]=o*o*u+a,t[1]=c*o*u+f*n,t[2]=f*o*u-c*n,t[3]=0,t[4]=o*c*u-f*n,t[5]=c*c*u+a,t[6]=f*c*u+o*n,t[7]=0,t[8]=o*f*u+c*n,t[9]=c*f*u-o*n,t[10]=f*f*u+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,r){let n=e[0],a=e[1],i=e[2],u=e[3],o=n+n,c=a+a,f=i+i,s=n*o,l=n*c,d=n*f,h=a*c,T=a*f,_=i*f,E=u*o,b=u*c,p=u*f;return t[0]=1-(h+_),t[1]=l+p,t[2]=d-b,t[3]=0,t[4]=l-p,t[5]=1-(s+_),t[6]=T+E,t[7]=0,t[8]=d+b,t[9]=T-E,t[10]=1-(s+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let r=e[0],n=e[1],a=e[2],i=e[4],u=e[5],o=e[6],c=e[8],f=e[9],s=e[10];return t[0]=Math.sqrt(r*r+n*n+a*a),t[1]=Math.sqrt(i*i+u*u+o*o),t[2]=Math.sqrt(c*c+f*f+s*s),t},e.getRotation=function(t,e){let r=e[0]+e[5]+e[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,e,r,n){let a=e[0],i=e[1],u=e[2],o=e[3],c=a+a,f=i+i,s=u+u,l=a*c,d=a*f,h=a*s,T=i*f,_=i*s,E=u*s,b=o*c,p=o*f,M=o*s,m=n[0],A=n[1],v=n[2];return t[0]=(1-(T+E))*m,t[1]=(d+M)*m,t[2]=(h-p)*m,t[3]=0,t[4]=(d-M)*A,t[5]=(1-(l+E))*A,t[6]=(_+b)*A,t[7]=0,t[8]=(h+p)*v,t[9]=(_-b)*v,t[10]=(1-(l+T))*v,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,r,n,a){let i=e[0],u=e[1],o=e[2],c=e[3],f=i+i,s=u+u,l=o+o,d=i*f,h=i*s,T=i*l,_=u*s,E=u*l,b=o*l,p=c*f,M=c*s,m=c*l,A=n[0],v=n[1],y=n[2],S=a[0],R=a[1],g=a[2];return t[0]=(1-(_+b))*A,t[1]=(h+m)*A,t[2]=(T-M)*A,t[3]=0,t[4]=(h-m)*v,t[5]=(1-(d+b))*v,t[6]=(E+p)*v,t[7]=0,t[8]=(T+M)*y,t[9]=(E-p)*y,t[10]=(1-(d+_))*y,t[11]=0,t[12]=r[0]+S-(t[0]*S+t[4]*R+t[8]*g),t[13]=r[1]+R-(t[1]*S+t[5]*R+t[9]*g),t[14]=r[2]+g-(t[2]*S+t[6]*R+t[10]*g),t[15]=1,t},e.fromQuat=function(t,e){let r=e[0],n=e[1],a=e[2],i=e[3],u=r+r,o=n+n,c=a+a,f=r*u,s=n*u,l=n*o,d=a*u,h=a*o,T=a*c,_=i*u,E=i*o,b=i*c;return t[0]=1-l-T,t[1]=s+b,t[2]=d-E,t[3]=0,t[4]=s-b,t[5]=1-f-T,t[6]=h+_,t[7]=0,t[8]=d+E,t[9]=h-_,t[10]=1-f-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,r,n,a,i,u){let o=1/(r-e),c=1/(a-n),f=1/(i-u);return t[0]=2*i*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*c,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(a+n)*c,t[10]=(u+i)*f,t[11]=-1,t[12]=0,t[13]=0,t[14]=u*i*2*f,t[15]=0,t},e.perspective=function(t,e,r,n,a){let i=1/Math.tan(e/2),u=1/(n-a);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+n)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*n*u,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,r,n){let a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),c=2/(u+o),f=2/(a+i);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=f,t[6]=0,t[7]=0,t[8]=-(u-o)*c*.5,t[9]=(a-i)*f*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,e,r,n,a,i,u){let o=1/(e-r),c=1/(n-a),f=1/(i-u);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*f,t[11]=0,t[12]=(e+r)*o,t[13]=(a+n)*c,t[14]=(u+i)*f,t[15]=1,t},e.lookAt=function(t,e,r,n){let a,u,o,c,f,s,l,d,h,T,_=e[0],E=e[1],b=e[2],p=n[0],M=n[1],m=n[2],A=r[0],v=r[1],y=r[2];return Math.abs(_-A)<i.b&&Math.abs(E-v)<i.b&&Math.abs(b-y)<i.b?mat4.identity(t):(l=_-A,d=E-v,h=b-y,T=1/Math.sqrt(l*l+d*d+h*h),l*=T,d*=T,h*=T,a=M*h-m*d,u=m*l-p*h,o=p*d-M*l,(T=Math.sqrt(a*a+u*u+o*o))?(a*=T=1/T,u*=T,o*=T):(a=0,u=0,o=0),c=d*o-h*u,f=h*a-l*o,s=l*u-d*a,(T=Math.sqrt(c*c+f*f+s*s))?(c*=T=1/T,f*=T,s*=T):(c=0,f=0,s=0),t[0]=a,t[1]=c,t[2]=l,t[3]=0,t[4]=u,t[5]=f,t[6]=d,t[7]=0,t[8]=o,t[9]=s,t[10]=h,t[11]=0,t[12]=-(a*_+u*E+o*b),t[13]=-(c*_+f*E+s*b),t[14]=-(l*_+d*E+h*b),t[15]=1,t)},e.targetTo=function(t,e,r,n){let a=e[0],i=e[1],u=e[2],o=n[0],c=n[1],f=n[2],s=a-r[0],l=i-r[1],d=u-r[2],h=s*s+l*l+d*d;h>0&&(s*=h=1/Math.sqrt(h),l*=h,d*=h);let T=c*d-f*l,_=f*s-o*d,E=o*l-c*s;return t[0]=T,t[1]=_,t[2]=E,t[3]=0,t[4]=l*E-d*_,t[5]=d*T-s*E,t[6]=s*_-l*T,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=a,t[13]=i,t[14]=u,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t},e.subtract=a,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let r=t[0],n=t[1],a=t[2],u=t[3],o=t[4],c=t[5],f=t[6],s=t[7],l=t[8],d=t[9],h=t[10],T=t[11],_=t[12],E=t[13],b=t[14],p=t[15],M=e[0],m=e[1],A=e[2],v=e[3],y=e[4],S=e[5],R=e[6],g=e[7],O=e[8],F=e[9],N=e[10],U=e[11],I=e[12],D=e[13],L=e[14],x=e[15];return Math.abs(r-M)<=i.b*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(n-m)<=i.b*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(a-A)<=i.b*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(u-v)<=i.b*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(o-y)<=i.b*Math.max(1,Math.abs(o),Math.abs(y))&&Math.abs(c-S)<=i.b*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(f-R)<=i.b*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(s-g)<=i.b*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-O)<=i.b*Math.max(1,Math.abs(l),Math.abs(O))&&Math.abs(d-F)<=i.b*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(h-N)<=i.b*Math.max(1,Math.abs(h),Math.abs(N))&&Math.abs(T-U)<=i.b*Math.max(1,Math.abs(T),Math.abs(U))&&Math.abs(_-I)<=i.b*Math.max(1,Math.abs(_),Math.abs(I))&&Math.abs(E-D)<=i.b*Math.max(1,Math.abs(E),Math.abs(D))&&Math.abs(b-L)<=i.b*Math.max(1,Math.abs(b),Math.abs(L))&&Math.abs(p-x)<=i.b*Math.max(1,Math.abs(p),Math.abs(x))};var i=r(0);const u=n;e.mul=u;const o=a;e.sub=o},function(t,e,r){"use strict";function n(){let t=new i.a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,e,r,n){let a,i,u,o,c,f=e[0],s=e[1],l=e[2],d=e[3],h=r[0],T=r[1],_=r[2],E=r[3];return(i=f*h+s*T+l*_+d*E)<0&&(i=-i,h=-h,T=-T,_=-_,E=-E),1-i>1e-6?(a=Math.acos(i),u=Math.sin(a),o=Math.sin((1-n)*a)/u,c=Math.sin(n*a)/u):(o=1-n,c=n),t[0]=o*f+c*h,t[1]=o*s+c*T,t[2]=o*l+c*_,t[3]=o*d+c*E,t}var i=r(0),u=r(3),o=r(4),c=r(5);c.b,c.g,c.c,c.l,c.a,c.k,c.d,c.i,c.h,c.m;const f=c.j;c.f,c.e,function(){let t=o.create(),e=o.fromValues(1,0,0),r=o.fromValues(0,1,0)}(),function(){let t=n(),e=n()}(),function(){let t=u.a()}()},function(t,e,r){"use strict";var n=r(0);!function(){let t=function(){let t=new n.a(2);return t[0]=0,t[1]=0,t}()}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makePerspective=function(t){var e=Object(a.d)({near:.1,far:1e3,fovy:.6*Math.PI,aspect:1}).react([t.HOT],function(t,e){var r=e.width,n=e.height;return t.aspect=r/n,t});return{perspectiveSettings:e,perspective:Object(a.d)(n.a.create()).react([e.HOT],function(t,e){return n.a.perspective(t,e.fovy,e.aspect,e.near,e.far)})}},e.makeFirstPersonView=function(){var t=Object(a.d)(n.b.fromValues(0,0,0)),e=Object(a.d)(0),r=Object(a.d)(0),i=Object(a.d)({rotX:n.a.create(),rotY:n.a.create()}).react([e.HOT],function(t,e){return n.a.fromYRotation(t.rotY,e),t}).react([r.HOT],function(t,e){return n.a.fromXRotation(t.rotX,e),t});return{position:t,rotation:i,view:Object(a.d)(n.a.create()).react([i.HOT,t.HOT],function(t,e,r){return n.a.fromTranslation(t,r),n.a.multiply(t,t,e.rotY),n.a.multiply(t,t,e.rotX),n.a.invert(t,t),t}),rotY:e,rotX:r}};var n=r(2),a=r(6)},function(t,e,r){"use strict";e.a=function(){return{entities:{},processes:{},arcs:{},meta:{}}},e.b=function(t,e){return{entities:n({},t.entities,e.entities),processes:n({},t.processes,e.processes),arcs:n({},t.arcs,e.arcs),meta:n({},t.meta,e.meta)}};var n=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t}},function(t,e,r){"use strict";e.c=function(t){var e=t.id,r=void 0===e?Object(n.a)():e,a=t.value,u=t.json,o=t.accept,c=t.reset,f=t.meta;return null==a&&u&&(a=JSON.parse(u)),{id:r,value:a,accept:o,reset:c,meta:i({},f)}},e.d=function(t,e){var r=t.id,o=void 0===r?Object(n.a)():r,c=t.ports,f=void 0===c?[]:c,s=t.procedure,l=t.code,d=t.autostart,h=void 0!==d&&d,T=t.async,_=void 0!==T&&T,E=t.delta,b=void 0!==E&&E,p=t.meta;if(null==s&&null!=l&&(s=Object(a.a)(l,e)),null==s)throw TypeError("Process must have procedure or code set");return b&&!f.length&&f.push(u.HOT),{id:o,ports:f,procedure:s,autostart:h,async:_,delta:b,meta:i({},p)}},e.b=function(t){var e=t.id,r=t.entity,n=t.process,a=t.port,u=t.meta;if(null==r)throw TypeError("no entity specified in arc "+e);if(null==n)throw TypeError("no process specified in arc "+e);return null==e&&(e=null==a?n+"->"+r:r+"->"+n+"::"+a),{id:e,entity:r,process:n,port:a,meta:i({},u)}},r.d(e,"a",function(){return u});var n=r(7),a=r(20),i=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t},u={COLD:"COLD",HOT:"HOT",ACCUMULATOR:"ACCUMULATOR"}},function(module,__webpack_exports__,__webpack_require__){"use strict";function evaluate(code,context){var prefix="(function(){ return ",postfix="})",factory=eval(prefix+code+postfix);return factory.call(context)}__webpack_exports__.a=evaluate},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBodyCanvas=function(){return{canvas:Object(n.b)(null,function(t){var e=document.createElement("canvas");return document.body.appendChild(e),t(e),function(){document.body.removeChild(e)}})}},e.setupPainter=function(t,e,r){var u=Object(n.c)([t.HOT],i.a),o=Object(n.a)([u.HOT],function(t,e){var r=Object(a.a)(e);return t(r),r.destroy}).accept(__WEBPACK_IMPORTED_MODULE_3_tvs_libs_dist_utils_predicates__.unequal),c=Object(n.c)([t.HOT,e.HOT],function(t){return{width:t.clientWidth,height:t.clientHeight}});return o.react([c.HOT],function(t,e){return t.resize()},"updateSize"),r&&o.react([r.HOT],function(t,e){return t.updateDrawSettings(e)}),{painter:o,gl:u,canvasSize:c}},e.makeShadeEntity=function(t,e){var r=Object(n.a)([t.HOT],function(t,e){var r=e.createShade();return t(r),r.destroy});return e&&r.react([e.HOT],function(t,e){return t.update(e)}),r},e.makeFormEntity=function(t,e){var r=Object(n.a)([t.HOT],function(t,e){var r=e.createForm();return t(r),r.destroy});return e&&r.react([e.HOT],function(t,e){return t.update(e)}),r},e.makeSketchEntity=function(t,e){var r=Object(n.a)([t.HOT],function(t,e){var r=e.createSketch();return t(r),r.destroy});return e&&r.react([e.HOT],function(t,e){return t.update(e)}),r},e.makeFlatSketchEntity=function(t,e){var r=Object(n.a)([t.HOT],function(t,e){var r=e.createFlatSketch();return t(r),r.destroy});return e&&r.react([e.HOT],function(t,e){return t.update(e)}),r},e.makeStaticLayerEntity=function(t,e){var r=Object(n.a)([t.HOT],function(t,e){var r=e.createStaticLayer();return t(r),r.destroy});return e&&r.react([e.HOT],function(t,e){return t.update(e)}),r},e.makeDrawingLayerEntity=function(t,e){var r=Object(n.a)([t.HOT],function(t,e){var r=e.createDrawingLayer();return t(r),r.destroy});return e&&r.react([e.HOT],function(t,e){return t.update(e)}),r},e.makeEffectLayerEntity=function(t,e){var r=Object(n.a)([t.HOT],function(t,e){var r=e.createEffectLayer();return t(r),r.destroy});return e&&r.react([e.HOT],function(t,e){return t.update(e)}),r};var n=r(6),a=r(22),i=r(9);throw new Error('Cannot find module "tvs-libs/dist/utils/predicates"')},function(t,e,r){"use strict";function n(t,e,r,n){var u=e.shade,o=e.uniforms,c=e.form,f=e.drawSettings;if(!u||!c)throw Error("cannot draw, shader or geometry are not set");if(t.useProgram(u.program),function(t,e){for(var r in e.attribs){var n=t.attributeSetters[r];n&&n.setter(e.attribs[r])}}(u,c),n&&i(u,n,r),f&&Object(s.a)(t,f),Array.isArray(o))for(var l=0,d=o;l<d.length;l++){a(t,e,r,d[l])}else a(t,e,r,o);f&&Object(s.f)(t,f)}function a(t,e,r,n){n&&i(e.shade,n,r),e.form.elements&&null!=e.form.elements.glType?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.form.elements.buffer),t.drawElements(e.form.drawType,e.form.itemCount,e.form.elements.glType,0)):t.drawArrays(e.form.drawType,0,e.form.itemCount)}function i(t,e,r){for(var n in e){var a=t.uniformSetters[n];if(a){var i=e[n];null===i||"string"==typeof i?a.setter(r):a.setter(i)}}}e.a=function(t){var e=[{},{}],r=Object(d.d)(t),a=u.a(t).update(d.a.renderQuad),i=function(){return c.a().update({form:a,shade:o.a(t).update(d.b.basicEffect)})},T=i(),_=function(r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var a=t.canvas;return(Object(l.b)(a,r)||n)&&e.forEach(function(e){e.width=a.width,e.height=a.height,e.textureConfig={count:1,type:t.UNSIGNED_BYTE},Object(s.h)(t,e,d.c)}),E};_(1,!0);var E={gl:t,updateDrawSettings:function(e){return Object(s.a)(t,h({},r,e)),E},createForm:function(){return u.a(t)},createShade:function(){return o.a(t)},createSketch:function(){return c.a()},createFlatSketch:i,createStaticLayer:function(){return f.b(t)},createDrawingLayer:function(){return f.a(t)},createEffectLayer:function(){return f.a(t).update({sketches:[i()]})},draw:function(e,r){return n(t,e,null,r),E},compose:function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return function(t,e,r,a){for(var i=e.length-1,u=function(u){var o=e[u],c=function(e,i){var u=r[0],c=r[1],f=!i&&null==o.target;if(i?(t.bindFramebuffer(t.FRAMEBUFFER,null),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)):o.target?(t.bindFramebuffer(t.FRAMEBUFFER,o.target.frameBuffer),t.viewport(0,0,o.target.width,o.target.height)):(t.bindFramebuffer(t.FRAMEBUFFER,c.frameBuffer),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)),o.data.drawSettings&&Object(s.a)(t,o.data.drawSettings),o.sketches)for(var l=0,d=o.sketches;l<d.length;l++){var h=d[l];n(t,h,u.textures[0],e)}else n(t,a,null,{source:o.texture()});o.data.drawSettings&&Object(s.f)(t,o.data.drawSettings),f&&(r[0]=c,r[1]=u)};if(Array.isArray(o.uniforms))for(var f=i+o.uniforms.length-1,l=0;l<o.uniforms.length;l++){var d=u+l===f;c(o.uniforms[l],d)}else{var d=u===i;c(o.uniforms,d)}},o=0;o<e.length;o++)u(o)}(t,r,e,T),E},resize:_,destroy:function(){T.destroy();for(var r=0,n=e;r<n.length;r++){var a=n[r];Object(s.d)(t,a)}}};return E};var u=r(23),o=r(24),c=r(25),f=r(26),s=r(1),l=r(9),d=r(27),h=this&&this.__assign||Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t}},function(t,e,r){"use strict";e.a=function(t){var e={};return e.update=function(r){r.drawType&&(e.drawType=t[r.drawType]),r.itemCount&&(e.itemCount=r.itemCount);var a=e.attribs||{};for(var i in r.attribs){var u=r.attribs[i];null==a[i]&&(a[i]={buffer:t.createBuffer()}),t.bindBuffer(t.ARRAY_BUFFER,a[i].buffer),t.bufferData(t.ARRAY_BUFFER,u.buffer,t[(u.storeType||"STATIC")+"_DRAW"])}if(e.attribs=a,r.elements){var o=r.elements.buffer;null==e.elements&&(e.elements={buffer:t.createBuffer(),glType:null}),e.elements.glType=Object(n.e)(o),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.elements.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,o,t[(r.elements.storeType||"STATIC")+"_DRAW"])}return e},e.destroy=function(){for(var r in e.attribs)t.deleteBuffer(e.attribs[r].buffer);return e.elements&&t.deleteBuffer(e.elements.buffer),e},e};var n=r(1)},function(t,e,r){"use strict";function n(t){return t.trim().split("\n").map(function(t,e){return e+1+": "+t}).join("\n")}e.a=function(t){var e={program:t.createProgram(),frag:t.createShader(t.FRAGMENT_SHADER),vert:t.createShader(t.VERTEX_SHADER)};return t.attachShader(e.program,e.vert),t.attachShader(e.program,e.frag),e.update=function(r){var i=r.frag&&r.frag.trim()||e.fragSource,u=r.vert&&r.vert.trim()||e.vertSource;if(!i||!u)return e;if(i.indexOf("GL_EXT_draw_buffers")>=0&&t.getExtension("WEBGL_draw_buffers"),t.shaderSource(e.vert,u),t.shaderSource(e.frag,i),t.compileShader(e.vert),t.compileShader(e.frag),t.getShaderParameter(e.vert,t.COMPILE_STATUS)||console.error("Error Compiling Vertex Shader!\n",t.getShaderInfoLog(e.vert),n(u)),t.getShaderParameter(e.frag,t.COMPILE_STATUS)||console.error("Error Compiling Fragment Shader!\n",t.getShaderInfoLog(e.frag),n(i)),t.linkProgram(e.program),!t.getProgramParameter(e.program,t.LINK_STATUS)){var o=t.getProgramInfoLog(e.program);console.error("Error in program linking:",o)}return e.uniformSetters=Object(a.c)(t,e.program),e.attributeSetters=Object(a.b)(t,e.program),e.fragSource=i,e.vertSource=u,e},e.destroy=function(){t.deleteProgram(e.program),t.deleteShader(e.frag),t.deleteShader(e.vert)},e};var a=r(1)},function(t,e,r){"use strict";e.a=function(){var t={};return t.update=function(e){return e.drawSettings&&(t.drawSettings=e.drawSettings),e.form&&(t.form=e.form),e.shade&&(t.shade=e.shade),e.uniforms&&(t.uniforms=e.uniforms),t},t.destroy=function(){t.form.destroy(),t.shade.destroy()},t}},function(t,e,r){"use strict";e.b=function(t){var e={},r=t.createTexture();return e.textures=[r],e.data={},e.texture=function(){return r},e.update=function(a){return t.bindTexture(t.TEXTURE_2D,r),Object(n.g)(t,a,e.data),a.asset&&t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a.asset),a.minFilter&&a.minFilter.indexOf("MIPMAP")>0&&t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null),Object.assign(e.data,a),e},e.destroy=function(){t.deleteTexture(r)},e},e.a=function(t){var e={};return e.textures=[],e.data={},e.texture=function(t){return void 0===t&&(t=0),e.textures[t]},e.update=function(r){if(r.buffered&&!e.target?(e.target={width:r.width||t.canvas.width,height:r.height||t.canvas.height,frameBuffer:null,textures:[],depthBuffer:null,textureConfig:{type:r.textureConfig&&r.textureConfig.type||t.UNSIGNED_BYTE,count:r.textureConfig&&r.textureConfig.count||1}},Object(n.h)(t,e.target,r,e.data),e.textures=e.target.textures):e.target&&r.width&&r.height&&(e.target.width=r.width,e.target.height=r.height,Object(n.h)(t,e.target,r,e.data)),r.sketches&&(e.sketches=r.sketches),r.frag){var a=e.sketches&&e.sketches[0];a&&a.shade.update({frag:r.frag})}return r.uniforms&&(e.uniforms=r.uniforms),Object.assign(e.data,r),e},e.destroy=function(){if(e.sketches)for(var r=0,a=e.sketches;r<a.length;r++)a[r].destroy();if(e.target)Object(n.d)(t,e.target);else for(var i=0,u=e.textures;i<u.length;i++){var o=u[i];t.deleteTexture(o)}},e};var n=r(1)},function(t,e,r){"use strict";r.d(e,"c",function(){return i}),e.d=function(t){return{clearColor:[0,0,0,1],enable:[t.DEPTH_TEST],blendFunc:[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA]}},r.d(e,"a",function(){return u}),r.d(e,"b",function(){return o});var n,a=r(8),i={wrap:"CLAMP_TO_EDGE",minFilter:"LINEAR",magFilter:"NEAREST"},u={renderQuad:{attribs:(n={},n[a.a]={buffer:new Float32Array([-1,1,-1,-1,1,1,1,-1]),storeType:"STATIC"},n[a.b]={buffer:new Float32Array([0,1,0,0,1,1,1,0]),storeType:"STATIC"},n),drawType:"TRIANGLE_STRIP",itemCount:4}},o={basicEffect:{vert:"\n\t\t\tattribute vec2 "+a.a+";\n\t\t\tattribute vec2 "+a.b+";\n\t\t\tvarying vec2 "+a.e+";\n\t\t\tvoid main() {\n\t\t\t\t"+a.e+" = "+a.b+";\n\t\t\t\tgl_Position = vec4("+a.a+", 0.0, 1.0);\n\t\t\t}",frag:"precision mediump float;\n\t\t\tuniform sampler2D "+a.d+";\n\t\t\tvarying vec2 "+a.e+";\n\t\t\tvoid main() {\n\t\t\t\tgl_FragColor = texture2D("+a.d+", "+a.e+");\n\t\t\t}"}}}])});